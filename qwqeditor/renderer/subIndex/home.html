
<br>
<br>
<br>
<br>
<br>

<h1>Home</h1>
<p>Welcome to the Home section</p>

<!-- æ·»åŠ æŒ‰é’® -->
<button id="selectFolderButton">é€‰æ‹©æ–‡ä»¶å¤¹</button>

<!-- é¢„ç•™æ–‡ä»¶æ ‘æ˜¾ç¤ºåŒºåŸŸ -->
<div id="fileTree" class="file-tree"></div>

<style>
    /* æ–‡ä»¶æ ‘åŒºåŸŸæ ·å¼ */
    .file-tree {
        font-family: Arial, sans-serif;
        margin-top: 10px;
    }

    /* æ–‡ä»¶å¤¹å’Œæ–‡ä»¶æ ·å¼ */
    .file-item {
        display: flex;
        align-items: center;
        padding: 5px;
        cursor: pointer;
    }
    .file-item:hover {
        background-color: #f0f0f0;
    }

    /* æ–‡ä»¶å¤¹å›¾æ ‡ */
    .folder-icon, .file-icon {
        margin-right: 8px;
    }

    /* æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åæ ·å¼ */
    .file-name {
        font-size: 14px;
    }

    /* æ–‡ä»¶å¤¹çš„åµŒå¥—æ ·å¼ */
    .folder-children {
        margin-left: 20px;
        display: none; /* é»˜è®¤éšè—å­æ–‡ä»¶å¤¹ */
    }
    .folder-expanded .folder-children {
        display: block; /* å±•å¼€å­æ–‡ä»¶å¤¹ */
    }
</style>

<script>
    document.getElementById("selectFolderButton").addEventListener("click", () => {
        // å‘çˆ¶çª—å£å‘é€é€‰æ‹©æ–‡ä»¶å¤¹è¯·æ±‚
        window.parent.postMessage({ action: "selectFolder" }, "*");
    });

    window.addEventListener("message", (event) => {
        if (event.data.action === "displayFileTree" && event.data.fileTree) {
            displayFileTree(event.data.fileTree);
        }
    });

    function displayFileTree(files, container = document.getElementById("fileTree")) {
        container.innerHTML = ""; // æ¸…ç©ºæ–‡ä»¶æ ‘åŒºåŸŸ
        files.forEach(file => {
            const item = document.createElement("div");
            item.classList.add("file-item");

            // è®¾ç½®æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„å›¾æ ‡
            const icon = document.createElement("span");
            icon.classList.add(file.isDirectory ? "folder-icon" : "file-icon");
            icon.textContent = file.isDirectory ? "ğŸ“" : "ğŸ“„";

            const fileName = document.createElement("span");
            fileName.textContent = file.name;
            fileName.classList.add("file-name");

            item.appendChild(icon);
            item.appendChild(fileName);

            container.appendChild(item);

            // å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºåµŒå¥—çš„å­å…ƒç´ 
            if (file.isDirectory) {
                const childrenContainer = document.createElement("div");
                childrenContainer.classList.add("folder-children");

                item.classList.add("folder-item");
                item.appendChild(childrenContainer);

                // ç‚¹å‡»æ–‡ä»¶å¤¹å±•å¼€/æŠ˜å å­æ–‡ä»¶å¤¹
                item.addEventListener("click", (e) => {
                    e.stopPropagation();
                    item.classList.toggle("folder-expanded");
                    displayFileTree(file.children, childrenContainer);
                });
            }
        });
    }

</script>
